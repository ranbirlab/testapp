region              = "uksouth"
resource_group_name = "uk-uks-tax-stg-rg-mvp"

key_vault = {
  name                                                  = "uk-uks-tax-stg-kv-mvp"
  pricing_tier                                          = "standard"
  soft_delete_retention_days                            = 90
  enable_purge_protection                               = false
  enable_rbac_authorization                             = false
  enable_azure_virtual_machines_for_deployment          = false
  enable_azure_resource_manager_for_template_deployment = false
  enable_azure_disk_encryption_for_volume_encryption    = false
  enable_private_endpoint                               = false
  network_access_control_lists = {
    bypass         = "AzureServices"
    default_action = "Allow"
  }
}

web_vms = {
  admin_username              = "vmlocaladmin"
  application_security_groups = ["asg_web"]
  availability_sets = [{
    name = "avweb"
  }]
  virtual_machines = [{
    name                  = "vmtaxmvp01"
    size                  = "Standard_B2s"
    availability_set_name = "avweb"
    data_disks = [{
      disk_size    = 256
      disk_sku     = "StandardSSD_LRS"
      disk_caching = "None"
      },
      {
        disk_size    = 256
        disk_sku     = "StandardSSD_LRS"
        disk_caching = "ReadOnly"
    }]
    encryption_at_host_enabled = false
    nic_config = [{
      application_security_group_name = "asg_web"
      subnet_name                     = "uk-uks-tax-stg-snet-app1"
      vnet_name                       = "uk-uks-tax-stg-vnet-2500"
      vnet_rg_name                    = "uk-uks-tax-stg-rg-vnet"
    }]
  },
  {
    name                  = "vmtaxmvp02"
    size                  = "Standard_B2s"
    availability_set_name = "avweb"
    data_disks = [{
      disk_size    = 256
      disk_sku     = "StandardSSD_LRS"
      disk_caching = "None"
      },
      {
        disk_size    = 256
        disk_sku     = "StandardSSD_LRS"
        disk_caching = "ReadOnly"
    }]
    encryption_at_host_enabled = false
    nic_config = [{
      application_security_group_name = "asg_web"
      subnet_name                     = "uk-uks-tax-stg-snet-app1"
      vnet_name                       = "uk-uks-tax-stg-vnet-2500"
      vnet_rg_name                    = "uk-uks-tax-stg-rg-vnet"
    }]
  }]
}

web_loadbalancer = {
  name = "uk-uks-tax-stg-lb-mvp"
  sku = "Standard"
  sku_tier = "Regional"
  backend_address_pool_association_name = "web_bp_as"
  backend_address_pool_name = "web_bp"
  frontend_configuration = {
    name = "lbtaxstg"
    private_ip_address = "10.83.37.200"
    private_ip_address_allocation = "Static"
    private_ip_address_version = "IPv4"
  }
}